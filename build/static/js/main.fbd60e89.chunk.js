(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),s=t(13),u=t.n(s),o=(t(19),t(2)),l=t(3),c=t.n(l),i="/api/persons",m=function(){return c.a.get(i)},f=function(e){return c.a.post(i,e)},d=function(e,n){return c.a.put("".concat(i,"/").concat(e),n)},h=function(e){return window.confirm("delete ".concat(e.name))?c.a.delete("".concat(i,"/").concat(e.id)):c.a.get(i)},g=function(e){return r.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.persons.some((function(n){return n.name===e.newName}))?window.confirm("".concat(e.newName," is already in the phonebook, replace the old number with a new one?"))&&d(e.persons.filter((function(n){return n.name===e.newName}))[0].id,{name:e.newName,number:e.newNum,id:e.persons.filter((function(n){return n.name===e.newName}))[0].id}).then((function(){return m().then((function(n){e.setPersons(n.data)}))}),e.setMessage("Updated ".concat(e.newName)),setTimeout((function(){e.setMessage(null)}),3e3)).catch((function(n){e.setMessage(null),e.setErrorMessage("Information of ".concat(e.newName," has already been removed from server")),setTimeout((function(){e.setErrorMessage(null)}),3e3),m().then((function(n){e.setPersons(n.data)}))})):f({name:e.newName,number:e.newNum}).then((function(){return m().then((function(n){e.setPersons(n.data)}),e.setMessage("Added ".concat(e.newName)),setTimeout((function(){e.setMessage(null)}),3e3))})).catch((function(n){e.setMessage(null),console.log(n),e.setErrorMessage("Faulty Input"),setTimeout((function(){e.setErrorMessage(null)}),3e3),m().then((function(n){e.setPersons(n.data)}))})),e.setNewName(""),e.setNewNum("")}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:e.handleNoteChange,value:e.newName})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:e.handleNumChange,value:e.newNum})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},E=function(e){return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{onChange:e.handleFilChange,value:e.filter}))},p=function(e){var n=e.persons.filter((function(n){return!0===n.name.toLowerCase().includes(e.filter.toLowerCase())})),t=function(n){var t=parseInt(n.target.getAttribute("value")),a=e.persons.filter((function(e){return e.id===t}));console.log(a),h(a[0]).then((function(){return m().then((function(n){e.setPersons(n.data)}))}),e.setMessage("Removed ".concat(a[0].name)),setTimeout((function(){e.setMessage(null)}),3e3)).catch((function(n){e.setMessage(null),e.setErrorMessage("Information of ".concat(a[0].name," has already been removed from server")),setTimeout((function(){e.setErrorMessage(null)}),3e3),m().then((function(n){e.setPersons(n.data)}))}))},a=function(e){var n=e.person;return r.a.createElement("li",{key:n.name},n.name," ",n.number,r.a.createElement("button",{value:n.id,onClick:t},"delete"))};return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement(a,{key:e.name,person:e})})))},w=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"message"},n)},b=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},N=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],s=n[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),c=l[0],i=l[1],f=Object(a.useState)(""),d=Object(o.a)(f,2),h=d[0],N=d[1],v=Object(a.useState)(""),M=Object(o.a)(v,2),j=M[0],O=M[1],C=Object(a.useState)(null),P=Object(o.a)(C,2),y=P[0],k=P[1],S=Object(a.useState)(null),T=Object(o.a)(S,2),I=T[0],F=T[1];Object(a.useEffect)((function(){m().then((function(e){s(e.data)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{message:I}),r.a.createElement(w,{message:y}),r.a.createElement(E,{handleFilChange:function(e){return O(e.target.value)},filter:j}),r.a.createElement("h2",null,"add a new"),r.a.createElement(g,{newName:c,handleNumChange:function(e){return N(e.target.value)},newNum:h,handleNoteChange:function(e){return i(e.target.value)},persons:t,setPersons:s,setNewName:i,setNewNum:N,setMessage:k,setErrorMessage:F}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{persons:t,filter:j,setPersons:s,setMessage:k,setErrorMessage:F}))};u.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.fbd60e89.chunk.js.map